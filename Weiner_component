%Wiener component of filter 
clc
%code copied from deconv_protocol for fft of signal. Will be streamlined after
%first build
data = dlmread(fullfile('Data', 'Channel 1 SiPM response.dat'));
y = data(:, 2);
y(length(y)*2)=0;
Y_fft = fft(y);

%power component of filter
Y_power = abs(Y_fft).^2;

%generating white gaussian noise, this hsould be replaced with actual
%signal. coeffiient was determined by trial and error by plotting y + noise.

noise = 0.0001*randn(size(y));
 
Fnoise = fft(noise);

Fnoise_power = abs(Fnoise).^2;

%constructing weiner filter

W = (Y_power)/(Fnoise_power + Y_power);
